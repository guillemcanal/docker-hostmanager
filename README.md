# [WIP] Docker HostManager

[![Build Status](https://travis-ci.org/guillemcanal/docker-hostmanager.svg?branch=master)](https://travis-ci.org/guillemcanal/docker-hostmanager)
[![codecov](https://codecov.io/gh/guillemcanal/docker-hostmanager/branch/master/graph/badge.svg)](https://codecov.io/gh/guillemcanal/docker-hostmanager)
[![quality](https://sonarcloud.io/api/project_badges/measure?project=docker-hostmanager&metric=sqale_rating)](https://sonarcloud.io/dashboard?id=docker-hostmanager)
[![smells](https://sonarcloud.io/api/project_badges/measure?project=docker-hostmanager&metric=code_smells)](https://sonarcloud.io/project/issues?id=docker-hostmanager&resolved=false&types=CODE_SMELL)

Access your Docker containers using **domain names** either with **HTTP** or **HTTPS**.

The Docker HostManager update your `hosts` file and generate TLS certificates  
when a container gets created with just a couple of labels.

## Run

*Note*: The Docker image for this project is not yeat available on DockerHub,  
you will have to build it yourself üòá

### Linux

```shell
# Build the Docker image
docker build -t docker-hostmanager .

# Run the docker manager
docker run --detach -t --name docker-hostmanager \
--volume docker-hostmanager-data:/data:rw \
--volume /etc/hosts:/hosts/etc/hosts:rw \
--volume /var/run/docker.sock:/var/run/docker.sock:ro \
docker-hostmanager
```

### Mac

```shell
# Build the Docker image
docker build -t docker-hostmanager .

# Make your /etc/hosts/ writable
sudo chmod 777 /etc/hosts

# Run the docker manager
docker run --detach -t --name docker-hostmanager \
--restart always \
--volume docker-hostmanager-data:/data:rw \
--volume /private/etc/hosts:/hosts/etc/hosts:rw \
--volume /var/run/docker.sock:/var/run/docker.sock:ro \
docker-hostmanager
```

### Windows

No tested yet, to be documented.

## Install the root certificate

In order to access your domains using HTTPS, you will need to add the Root Certificate generated by DockerHostManager  
in your browsers and in your trusted root authority.

```shell
# Copy the certificate from a docker volume to your host machine
docker cp docker-hostmanager:/data/root-ca.crt .
```

**‚ö†Ô∏è To be documented**

## Usage example

```shell
docker run --rm -t \
--label 'traefik.enable=true' \
--label 'traefik.port=80' \
--label 'traefik.backend=demo' \
--label 'traefik.frontend.rule=Host: nginx.docker' \
nginx:alpine
```

Head to <http://nginx.docker>
